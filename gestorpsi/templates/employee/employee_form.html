{% load i18n %}
{% include "core/ajax_page.html" %}

<div id="msg_area" style="display:none"><!-- ou class="error" ou sem classe -->
	<div class="alert" style="display:none">
		{% if not object.id %}
			{% trans "Register added successful!" %}
		{% else %}
			{% trans "Register saved successful!" %}
		{% endif %}
	</div>
	<div class="error" style="display:none">
		{% trans "Error adding new register!" %}
	</div>
</div>

<h2 id="title_addressbook" style="display:none"></h2>

{% if object.id %}
	<h2 id="title_clients">{{ object.name }}</h2>
	
	<script type="text/javascript">
	$(document).ready(function(){
		/**
		create new tab when editing an user
		*/
		$('#sub_menu ul li a').removeClass('active');
		$("#sub_menu_employees_extras").html('<li><a class="active makemeajax" id="object_{{ object.id }}" href="/employee/{{ object.id }}">{{ object.person.name }}</a></li>');
		
		$(".makemeajax").each(function(){
		var link = $(this);
		link.click(function() {
			 $.get(link.attr('href'),
				 function(data) {
					 if(!link.attr('href')) {
						 alert('I am a ajaxlink, but i dont have the "href" atributte defined in the "<a>" tag');
						 exit();
					 } else {
						 $("#core").html(data);
					 }
					 
			 });
			 return false;
			 })
		 });

	});
		
	</script>
{% else %}
	<h2 id="title_clients">{% trans "Adding New Employee" %}</h2>
	<p class="description">{% trans "Inform the employee details then click on Save button" %}</p>
{% endif %}


</p>
<h2 id="title_contacts" style="display:none"></h2>
<h2 id="title_myoffice" style="display:none"></h2>


<form action="/employee/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" id="form_employee" class="form_people">	
<div id="main_area">

	<a href="" id="help">&nbsp;</a>
	<!-- DataTypes form menu -->
	
	<div id="photo">
		<img id="img_people" src="{% if object.person.photo %}{{ object.person.photo }}{% else %}/media/img/male_generic_photo.gif.png{% endif %}" />
		<a id="male" class="notajax gender{% ifequal object.person.gender '2' %} active{% endifequal %}" value="2"><span>{% trans "Male" %}</span></a>
		<a id="female" class="notajax gender{% ifequal object.person.gender '1' %} active{% endifequal %}" value="1"><span>{% trans "Female" %}</span></a>

		<a class="clips notajax" >{% trans "Photo" %}</a>
		<input type="hidden" name="photo" value="" id="id_photo" />
		<a href="notajax" class="delete" title="delete" onclick="$('#id_photo').val(''); $('img#img_people').attr('src', '/media/img/male_generic_photo.gif.png'); "><span>{% trans "Delete" %}</span></a>
		<input type="hidden" name="gender" value="{{ object.person.gender }}" id="id_gender" />

	</div> 
	

	<!--
	People Personal Identification Form	
	-->
	
	<fieldset id="fieldset_personal_identification">
		<legend>{% trans "Personal Identification" %}</legend>
			<label>{% trans "Name" %}<br />
			<input type="text" name="name" class="big" value="{{ object.person.name }}" id="id_name" />
			</label>
			<label>{% trans "Nickname" %}<br />
			<input type="text" name="nickname" class="big" value="{% ifnotequal object.person.nickname None %}{{ object.person.nickname }}{% endifnotequal %}" id="id_nickname" />
			</label>
	</fieldset>

	
	<!--
	Employee infos
	-->
	
	<fieldset id="fieldset_employee_details">
		<legend>{% trans "Personal Identification" %}</legend>
			<label>{% trans "Job" %}<br />
			<input type="text" name="job" class="big" value="{{ object.job }}" id="id_job" />
			</label>
			<label>{% trans "Hiredate" %}<br />
			<input type="text" name="hiredate" class="calendar birthdate" value="{% ifnotequal object.hiredate None %}{{ object.hiredate }}{% endifnotequal %}" id="id_hiredate" />
			</label>
	</fieldset>

	<!--
	people documents  
	-->
		
	<fieldset id="fieldset_document">
		<legend>{% trans "Documents" %}</legend>
			{% if not documents %}
				{% include "tags/document.html" %}
			{% else %}
				{% for document in documents %}
					{% include "tags/document.html" %}
				{% endfor %}
			{% endif %}
		<label id="document_more" class="add_to_form"><a class="notajax">{% trans "Add" %}</a></label>	
	</fieldset>
	
	<!--
	People Personal Profile Form	
	-->
		
	<fieldset id="fieldset_personal_profile">
		<legend>{% trans "Personal Profile" %}</legend>
			<label>{% trans "Birthdate" %}<br />
			<input type="text" name="birthDate" class="calendar birthdate" value="{% ifnotequal object.person.birthDate None %}{{ object.person.birthDate }}{% endifnotequal %}" id="id_birthDate" />
			</label>
			<label>{% trans "Age" %}<br />
			<input type="text" name="age" class="extrasmall" value="" id="id_age" />
			</label>
			<label>{% trans "Naturality" %}<br />
			<input type="text" class="extramedium city_search" value="{% ifnotequal object.person.birthPlace None %}{{ object.person.birthPlace }}{% endifnotequal %}" />
			</label>
			<!-- 
				don't remove and dont change the position of this label !!!!
				this receive the id of the city when selected
			-->
			<label style="display:none"><br />
			<input type="hidden" class="small" name="birthPlace" value="{% if object.person.birthPlace_id %}{{ object.person.birthPlace_id }}{% endif %}" id="id_birthPlace" />
			</label>
			<!--
			<label>{% trans "Region" %}<br />
			<input type="text" name="birthRegion" class="extrasmall" value="{{ object.birthRegion }}" id="id_birthRegion" />
			</label>
			-->
			<!--
			<label>{% trans "Nationality" %}<br />
			<input type="text" name="nationality" class="medium" value="{{ object.nationality }}" id="id_nationality" />
			</label>
			-->
	</fieldset>
	
	
	<!--
	people addresses  
	-->
		
	<fieldset id="fieldset_address">
		<legend>{% trans "Addresses" %}</legend>
			{% if not addresses %}
				{% include "tags/address.html" %}
			{% else %}
				{% for address in addresses %}
					{% include "tags/address.html" %}
				{% endfor %}
			{% endif %}
		<label id="address_more" class="add_to_form"><a class="notajax">{% trans "Add Address" %}</a></label>	
	</fieldset>
	
	
	<!--
	people phone numbers
	-->
		
	<fieldset id="fieldset_phone">
		<legend>{% trans "Phones" %}</legend>
			{% if not phones %}
				{% include "tags/phone.html" %}
			{% else %}
				{% for phone in phones %}
					{% include "tags/phone.html" %}
				{% endfor %}
			{% endif %}
		<label id="phone_more" class="add_to_form"><a class="notajax">{% trans "Add Phone" %}</a></label>	
	</fieldset>

	{% comment %}

	<!--
	emails addresses
	-->
		
	<fieldset id="fieldset_email">
		<legend>{% trans "Emails" %}</legend>
			{% if not emails %}
				{% include "tags/email.html" %}
			{% else %}
				{% for email in emails %}
					{% include "tags/email.html" %}
				{% endfor %}
			{% endif %}
		<label id="email_more" class="add_to_form"><a class="notajax">{% trans "Add Email" %}</a></label>
	</fieldset>


	
	
	<!--
	Instant Messengers
	-->
		
	<fieldset id="fieldset_im">
		<legend>{% trans "Instant Messengers" %}</legend>
			{% if not ims %}
				{% include "tags/im.html" %}
			{% else %}
				{% for im in ims %}
					{% include "tags/im.html" %}
				{% endfor %}
			{% endif %}
		<label id="im_more" class="add_to_form"><a class="notajax">{% trans "Add IM" %}</a></label>
	</fieldset>


	<!--
	WebSites
	-->
		
	<fieldset id="fieldset_website">
		<legend>{% trans "Websites" %}</legend>
			{% if not websites %}
				{% include "tags/website.html" %}
			{% else %}
				{% for website in websites %}
					{% include "tags/website.html" %}
				{% endfor %}
			{% endif %}
		<label id="website_more" class="add_to_form"><a class="notajax">{% trans "Add Website" %}</a></label>
	</fieldset>

	{% endcomment %}

<br />	
</div>

<div id="sidebar">
	<div class="bg_blue">
		<input name="save" type="submit" value="{% trans 'Save' %}" />
		<input name="save" type="button" value="{% trans 'Cancel' %}" />
		
		<div id="msg_info">
		{% trans "Delete Object" %}?
			<p>{% trans 'Last revision by' %} Adminstrador {% trans 'in' %} 17 de 
			Novembro, 2007 &agrave;s 17:36 h</p>

		</div>
	</div>
	
</div>

</form>

{% include "tags/upload.html" %}


