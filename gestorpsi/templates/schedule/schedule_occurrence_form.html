{% extends "core/main.html" %}

{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}

{% block menu_schedule %}active{% endblock %}

{% block submenu %}
 <ul id="sub_schedule">
    <li><a class="first" href="/schedule/">{% trans "daily" %}</a></li>
    <li><a href="/schedule/events/">{% trans "events" %}</a></li>
    <li><a class="active" href="#">{% trans "add" %}</a></li>
</ul>
{% endblock %}

{% block core %}

<h2 class="title_schedule title">{{ occurrence.event.referral.client.all.0 }} - {{ occurrence.event.referral.service }}</h2>
<p class="description"><a href="/careprofessional/{{ occurrence.event.referral.professional.all.0.id }}/">{{ occurrence.event.referral.professional.all.0 }}</a> - <a href="/schedule/events/{{ occurrence.event.id}}/">{{ occurrence.event.occurrence_set.all|length }} {% trans "Occurrences" %}</a></p>

<form method="post" action="/schedule/events/{{ occurrence.event.id }}/{{ occurrence.id }}/" class="schedule_occurrence">
<div class="main_area">
{{ event_form.errors }}
{{ recurrence_form.errors }}
	

        <fieldset>
        <legend>{% trans "Due Details" %}</legend>
            <label>{% trans "Start Time" %}<br />
            {{ form.start_time }}</label>
            <label>{% trans "End Time" %}<br />
            {{ form.end_time }}
            </label>
            <label>{% trans "Room" %}<br />
             <select name="room" class="extramedium asm" id="id_room">
              <option value="" selected="selected">---------</option>
               {% for room in rooms %}
                <option value="{{ room.id }}"{% ifequal room.id occurrence.room.id %} selected{% endifequal %}>{{ room.description }}</option>
               {% endfor %}
             </select>
            </label>
            <label>{% trans "Notes" %}<br />
            {{ form.annotation }}
            </label>
            <label>{% trans "Devices Available" %}<br />
            {{ form.device }}
            </label>            
        </fieldset>
    


        <fieldset>
        <legend>{% trans "Occurrences" %}</legend>
        <br />
        {% if occurrence.event.occurrence_set.count %}
            {% for o in occurrence.event.occurrence_set.all %}
            <div>
                &nbsp;&nbsp;<a href="{% url swingtime-occurrence occurrence.event.id o.id %}">
                    {{ o.start_time|date:"l, F jS, Y P" }} &ndash; 
                    {{ o.end_time|date:"l, F jS, Y P" }}</a>
            </div>
            {% endfor %}
        {% else %}
        {% endif %}
        
        </fieldset>
 
<div style="clear:both;"></div>
<br />
  </div>      

<div id="sidebar" class="sidebar">
    <div class="bg_blue">
        <input type="hidden" name="day_clicked" class="day_clicked" value="{{ occurrence.start_time|date:"Y/m/d" }}" />
        <input class="save_button" name="_add" type="submit" value="{% trans 'Save' %}" />
        <input class="save_button" name="cancel" id="cancel_button" type="button" value="{% trans 'Cancel' %}" />
    </div>
</div>

</form>
{% endblock %}
