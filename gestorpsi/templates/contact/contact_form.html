{% extends "core/main.html" %}

{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}

{% block menu_contact %}active{% endblock %}

{% block submenu %}
    <ul>
        <li><a class="first" href="/contact/">{% trans "all" %}</a></li>
        <li><a class="{% if not object.id %}active{% endif %}" href="/contact/add/">{% trans "add" %}</a></li>
        {% if object.id %}<li><a class="active">editing</a></li>{% endif %}
    </ul>
{% endblock %}

{% block core %}
<h2 id="title_addressbook" style="display:none"></h2>


<h2 class="title_contacts title">{% trans "Adding New Contact" %}</h2>
<p class="description">{% trans "Inform the client details then click on Save button" %}</p>

</p>
<h2 id="title_contacts" style="display:none"></h2>
<h2 id="title_myoffice" style="display:none"></h2>


<form action="/contact/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" class="collapsable form_contact">	
<div class="main_area">
	
<fieldset>

<legend>{% trans "Contact Type" %}</legend>
		<label>{% trans "Type" %}<br />
		<select name="type" class="big">
			<option value="professional" {% ifequal object_type '2' %}selected{% endifequal %}>{% trans "Professional" %}</option>
			<option value="organization" {% ifequal object_type '1' %}selected{% endifequal %}>{% trans "Organization" %}</option>
		</select>
		</label>
</fieldset>

<fieldset class="professional contact" {% ifequal object_type '1'%} style="display:none"{%endifequal%}>
<legend>{% trans "Professional Organization" %}</legend>
		<label>{% trans "Select Organization, or"%} <a class="form_mini" display="organization_mini">{% trans "add a new one" %}</a><br />
		<select name="organization" class="extrabig asm">
			{% for o in organizations %}
               <option value="{{ o.id }}"{% ifequal object.person.organization.all.0.id o.id %} selected{% endifequal %}>{{ o }}</option>
			{% endfor %}
		</select>
		</label>
</fieldset>


<fieldset class="professional contact" {% ifequal object_type '1' %}style="display:none"{% endifequal %}>
<legend>{% trans "Professional Identification" %}</legend>
		<label>{% trans "Name" %}<br />
		<input type="text" maxlength="50" {% ifnotequal object_type '1' %} name="name" class="giant professional_name cleanme tabtitle" {% else %} name="" class="giant professional_name cleanme" {% endifnotequal %} value="{{ object.person.name }}" />
		</label>

    <label>{% trans "Profession" %}<br />
        <select id="{{forloop.counter0}}" name="service_profession" class="medium asm profession_type">
                <option value="" selected="selected" >------</option>
            {% for p in professions %}
                <option value="{{ p.symbol }}"{% ifequal p object.professionalIdentification.profession %} selected="selected"{% endifequal %} >{{ p.type }}</option>
            {% endfor %}            
        </select>
    </label>
    
    <label>{% trans "Symbol" %}<br />
            <input id="{{forloop.counter0}}" type="text" name="symbol" class="profession_symbol small" readonly="1" {% ifnotequal object.professionalIdentification.profession.symbol "" %} value="{{ object.professionalIdentification.profession.symbol }}" {% endifnotequal %}>
    </label>

        <label>{% trans "Professional Subscription" %}<br />
            <input type="text" maxlength="50" class="medium" name="professional_subscription" value="{{ object.professionalIdentification.registerNumber }}" />
        </label>

</fieldset>


<fieldset class="organization contact"{% if not object.id %} style="display:none"{%else%}{% ifequal object_type '2'%} style="display:none"{%endifequal%}{% endif %}>
<legend>{% trans "Organization Identification" %}</legend>
		<label>{% trans "Name" %}<br />
		<input type="text" maxlength="50" {% ifequal object_type '1' %} name="name" {% endifequal %} class="big tabtitle organization_name cleanme" value="{{ object.name }}" />
		</label>
</fieldset>

{% include "meta/addressbook.html" %}
{% include "meta/internet.html" %}

<br />	
</div>

<div id="sidebar" class="sidebar">
    {% if perms.contact.contact_write %}
      
          <div class="bg_blue">
            {% include "tags/save.html" %}
          </div>

            {% if object.id %}
                {% include "tags/contact_sidebar.html" %}
            {% endif %}

    {% endif %}
</div>
</form>

{% include "tags/organization_mini.html" %}

{% endblock %}
