{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}
{% include "core/ajax_page.html" %}
<h2 id="title_addressbook" style="display:none"></h2>

<h2 class="title_contacts title">{% trans "Adding New Contact" %}</h2>
<p class="description">{% trans "Inform the client details then click on Save button" %}</p>

</p>
<h2 id="title_contacts" style="display:none"></h2>
<h2 id="title_myoffice" style="display:none"></h2>


<form action="/contact/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" class="collapsable form_contact">	
<div class="main_area">
	
<fieldset>
<legend>{% trans "Contact Type" %}</legend>
		<label>{% trans "Type" %}<br />
		<select name="type" class="big">
			<option value="professional" {% ifequal object_type '2' %}selected{% endifequal %}>{% trans "Professional" %}</option>
			<option value="organization" {% ifequal object_type '1' %}selected{% endifequal %}>{% trans "Organization" %}</option>
		</select>
		</label>
</fieldset>

<fieldset class="professional contact" {% ifequal object_type '1'%} style="display:none"{%endifequal%}>
<legend>{% trans "Professional Organization" %}</legend>
		<label>{% trans "Select Organization, or"%} <a class="form_mini" display="organization_mini">{% trans "add a new one" %}</a><br />
		<select name="organization" class="extrabig asm">
			{% for o in organizations %}
               <option value="{{ o.id }}"{% ifequal object.person.organization.id o.id %} selected{% endifequal %}>{{ o }}</option>
			{% endfor %}
		</select>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</label>
</fieldset>


<fieldset class="professional contact" {% ifequal object_type '1' %}style="display:none"{% endifequal %}>
<legend>{% trans "Professional Identification" %}</legend>
		<label>{% trans "Name" %}<br />
		<input type="text" maxlength="50" name="{% ifnotequal object_type '1' %}name{% endifnotequal %}" class="big tabtitle professional_name cleanme" value="{{ object.person.name }}" />
		</label>

    <label>{% trans "Profession" %}<br />
        <select id="{{forloop.counter0}}" name="service_profession" class="medium asm profession_type">
                <option value="" selected="selected" >------</option>
            {% for p in professions %}
                <option value="{{ p.symbol }}"{% ifequal p object.professionalIdentification.profession %} selected="selected"{% endifequal %} >{{ p.type }}</option>
            {% endfor %}            
        </select>
    </label>
    
    <label>{% trans "Symbol" %}<br />
            <input id="{{forloop.counter0}}" type="text" name="symbol" class="profession_symbol small" readonly="1" {% ifnotequal object.professionalIdentification.profession.symbol "" %} value="{{ object.professionalIdentification.profession.symbol }}" {% endifnotequal %}>
    </label>

        <label>{% trans "Professional Subscription" %}<br />
            <input type="text" maxlength="50" class="medium" name="professional_subscription" value="{{ object.professionalIdentification.registerNumber }}" />
        </label>

        <label>{% trans "Professional Organization Subscription" %}<br />
            <input type="text" maxlength="50" class="medium" name="professional_organization_subscription" value="{{ professional.organization_subscription }}" />
        </label>
</fieldset>


<fieldset class="organization contact"{% if not object.id %} style="display:none"{%else%}{% ifnotequal object_type '1'%} style="display:none"{%endifnotequal%}{% endif %}>
<legend>{% trans "Organization Identification" %}</legend>
		<label>{% trans "Name" %}<br />
		<input type="text" maxlength="50" name="{% ifequal object_type '1' %}name{% endifequal %}" class="big tabtitle organization_name cleanme" value="{{ object.name }}" />
		</label>
</fieldset>

{% include "meta/addressbook.html" %}
{% include "meta/internet.html" %}

<br />	
</div>

<div id="sidebar" class="sidebar">
    {% if perms.contact.contact_write %}
      
      {% ifequal object_type '1' %}
        {% if object.organization %}
          <div class="bg_blue">
            {% include "tags/save.html" %}
          </div>
        {% endif %}
      {% endifequal %}

      {% ifequal object_type '2' %}
          <div class="bg_blue">
            {% include "tags/save.html" %}
          </div>
      {% endifequal %}

      {% if not object_type %}
          <div class="bg_blue">
            {% include "tags/save.html" %}
          </div>
      {% endif %}

    {% endif %}
</div>
</form>

{% include "tags/organization_mini.html" %}

{% if object.id %}
</div> <!-- edit_form -->
{% endif %}
