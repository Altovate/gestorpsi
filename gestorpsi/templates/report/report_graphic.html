<!-- all of this content will be to id report_table in main core -->

<script type="text/javascript">

    function make_graphic1(rows){ 

        // Create the data table.
        var data = new google.visualization.DataTable();

        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');

        data.addRows( rows );

        // Set chart options
        var options = {'width':500,
                       'height':330,
                       colors: ['red', 'green', 'orange', 'blue'],
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('graphic'));
        chart.draw(data, options);
    }

</script>

<!-- list of clients -->
{% if option_rows %}

        <table class='report'>
            <tr>
                <th>&nbsp;</th>
            </tr>
            <tr>
                <th>Estat&iacute;stica de todos os prof&iacute;ssionais, servi&ccedil;os e pagamentos para o per&iacute;odo escolhido.</th>
            </tr>
            <tr>
                <th id='graphic'></th>
            </tr>
            <tr>
                <th>Total de pagamentos: {{ total_payment }}</th>
            </tr>
        </table>

        <div style="text-align:center; margin-top: 35px;">
            <h1>Lista de pagamentos</h1>
            <br />
            <br />
        </div>

        {% for x in list_payment %}
            {% if x.1 %}

               <div style='background-color:{{ x.2 }}; vertical-align:middle; padding: 0 15px; font-size: 15px; font-weight: bold; color: white; '>{{ x.0 }}</div>

               <table class="report_list">

                 <tbody>
                    <tr class="legend"> 
                        <th>Nome</th> 
                        <th>Data</th> 
                        <th>Servi&ccedil;o</th> 
                        <th>Valor</th> 
                    </tr> 

                    {% for c in x.1 %}
                        <tr class="{% cycle 'odd' 'even' %}">
                            <td style="text-align:center;">
                                {{ c.occurrence.all.0.event.referral.client.all.0 }}
                            </td>
                            <td style="text-align:center;">
                                {{ c.created|date:"D, d b Y" }}
                            </td>
                            <td style="text-align:center;">
                                {{ c.occurrence.all.0.event.referral.service }}
                            </td>
                            <td style="text-align:center;">
                                {{ c.total }}
                            </td>
                        </tr>
                    {% endfor %}

                    <!-- total -->
                        <tr><td>&nbsp;</td></tr>
                        <tr class="odd">
                            <td style="text-align:center; font-weight:bold;">
                                Valor total
                            </td>
                            <td style="text-align:center; font-weight:bold;">
                                Todos
                            </td>
                            <td style="text-align:center; font-weight:bold;">
                                Todos
                            </td>
                            <td style="text-align:center;">
                                {{ x.3 }}
                            </td>
                        </tr>

                 </tbody>
               </table>
            {% endif %}
        {% endfor %}

        <script>
            // convert Python array to JS array
            var rows = [];
            {% for i in option_rows %} rows.push( [ "{{ i.0 }}" , {{ i.1 }} ] ); {% endfor %}
            // call graphic function 
            make_graphic1(rows);
        </script>

{% else %}
    <script>
        $('#report_table').append('<div style="text-align:center;"><h3>N&atilde;o existe registro no per&iacute;odo escolhido.</h3></div>');
    </script>
{% endif %}
