<!-- all of this content will be to id report_table in main core -->

<script type="text/javascript">

    function make_graphic1(option_title , rows){ 

        // Create the data table.
        var data = new google.visualization.DataTable();

        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');

        data.addRows( rows );

        // Set chart options
        var options = {'title': option_title,
                       'width':500,
                       'height':330,
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('graphic'));
        chart.draw(data, options);
    }

</script>

<!-- list of clients -->
{% if option_rows %}

        <table class='report'>
            <tr>
                <th id='graphic'></th>
            </tr>
        </table>

        <div style="text-align:center; margin-top: 35px;">
            <h1>Lista de clientes</h1>
        </div>

        {% for x in list_payment %}
            {% if x.1 %}
               <h3>{{ x.0 }}</h3>
               <hr></hr>
               <table class="report_list">

                 <tbody>
                    <tr class="legend"> 
                        <th>Nome</th> 
                        <th>Data</th> 
                        <th>Servi&ccedil;o</th> 
                        <th>Valor</th> 
                    </tr> 

                    {% for c in x.1 %}
                        <tr class="{% cycle 'odd' 'even' %}">
                            <td>
                                {{ c.occurrence.all.0.event.referral.client.all.0 }}
                            </td>
                            <td>
                                {{ c.created|date:"D, d b Y" }}
                            </td>
                            <td>
                                {{ c.occurrence.all.0.event.referral.service }}
                            </td>
                            <td>
                                {{ c.total }}
                            </td>
                        </tr>
                    {% endfor %}

                 </tbody>
               </table>
            {% endif %}
        {% endfor %}

        <script>
            // convert Python array to JS array
            var rows = [];
            {% for i in option_rows %} rows.push( [ "{{ i.0 }}" , {{ i.1 }} ] ); {% endfor %}
            // call graphic function 
            make_graphic1("{{ option_title }}", rows );
        </script>

{% else %}
    <script>
        $('#report_table').append('<div style="text-align:center;"><h3>N&atilde;o existe registro no per&iacute;odo escolhido.</h3></div>');
    </script>
{% endif %}
