{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}
{% include "core/ajax_page.html" %}

{% if object.id %}
	<div class="edit_form">
	<h2 class="title_services title">{{ object.label }}</h2>
	<p class="description"><br />	
{% else %}
	<h2 class="title_services title">{% trans "Adding New Service" %}</h2>
	<p class="description">{% trans "Inform the service details then click on Save button" %}</p>
{% endif %}


</p>

<form action="/service/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" id="form_service" class="form_service">	
<div id="main_area">

	<a href="" id="help">&nbsp;</a>

	<!--
	Service Identification 
	-->
	
	<fieldset>
		<legend>{% trans "Service Identification" %}</legend>
			<label>{% trans "Service Name" %}<br />
			<input type="text" name="service_name" class="extrabig tabtitle" value="{{ object.name }}" />
			</label>
			<label>{% trans "Service Description" %}<br />
				<textarea name="service_description" class="extrabig">{{ object.description }}</textarea>				
			</label>
			<label>{% trans "Keywords" %}<br />
			<input type="text" name="service_keywords" class="extrabig" value="{{ object.keywords }}" />
			</label>
	</fieldset>

	<!--
	Service Profile 
	-->
	
	<fieldset>
		<legend>{% trans "Service Profile" %}</legend>
	
		<label>{% trans "Area" %}<br>
		<select name="service_area" class="extramedium service_area">
			{% for a in Areas %}
				{% if a.modality.values_list %}
				<option value="{{ a.id }}"{% ifequal a.id object.area.id %} selected{% endifequal %}>{{ a }}</option>
				{% endif %}
			{% endfor %}
		</select>
		</label>
		
		
		<label>{% trans "Type" %}<br />
		<select name="service_type" class="extramedium service_type">
			{% for s in ServiceTypes %}
			<option value="{{ s.id }}" area="{{ s.area.id }}"{% ifequal s.id object.service_type.id %} selected{% endifequal %}>{{ s }} </option>
			{% endfor %}
		</select>
		</label>

		<label>{% trans "Solicitation" %}<br />
		<select name="service_solicitation" class="extramedium service_solicitation small_fonts multiple asm" multiple="multiple">
			{% for m in Modalitys %}
			<option value="{{ m.id }}" class="{% for a in Areas %}{% for am in a.modality.values_list %}{% ifequal m.id am.0 %}area_{{ a.id }} {% endifequal %}{% endfor %}{% endfor %}"{% for om in object.modalities.values_list %}{% ifequal om.0 m.id %} selected="selected"{% endifequal %}{% endfor %}>{{ m }}</option>
			{% endfor %}
		</select>
		</label>
		
		<label>{% trans "Profession" %}<br />
		<select name="service_profession" multiple="multiple" class="extramedium multiple small_fonts asm">
			{% for p in Professions %}
				<option value="{{ p.id }}">{{ p.description }}</option>
			{% endfor %}			
		</select>
		</label>

	</fieldset>
	
	<fieldset class="service_areas area_3">
		<legend>{% trans "Clinica Area" %}</legend>
	
		<label>{% trans "Age" %}<br />
		<select name="service_age" multiple="multiple" class="extramedium multiple small_fonts asm">
		{% for l in AgeGroups %}
			<option value="{{ l.id }}">{{ l }}</option>
		{% endfor %}
		</select>
		</label>
	</fieldset>
		
	<fieldset>
		<legend>{% trans "Service Procedures" %}</legend>

		<!-- procedures providers to choice -->
		<label>
		{% for l in ProcedureProviders %}
			<a class="notajax select_multiple_menu" display="service_procedure_{{ l.name }}">{{ l.name }}</a>
		{% endfor %}
		<br />
		<!-- procedures itens -->
		{% for l in Procedures %}
			{% ifchanged l.procedure %}
				{% if not forloop.first %}
				</select>
				{% endif %}
				
				<select multiple="multiple" class="service_procedure_{{ l.procedure.name }} extrabig multiple itens_available small_fonts{% if forloop.first %} first{% endif %}">
			{% endifchanged %}
				<option value="{{ l.id }}"{% for p in object.procedures.values_list %}{% ifequal p.0 l.id %} style="display:none"{% endifequal %}{% endfor %}>{{ l.description }}</option>
	
			{% if forloop.last %}
				</select>
			{% endif %}
		{% endfor %}
		
		</label>
		
		<!-- itens choiced -->
		
		<label>{% trans "Procedures Choiced" %}<br />
		<select name="service_type_procedure" multiple="multiple" group="service_procedure" class="extrabig multiple itens_selected small_fonts">
		{% for p in object.procedures.values_list %}
		<option value="{{ p.0 }}" selected="selected">{{ p.2 }}</option>
		{% endfor %}
		</select>
		
		</label>
		
		
			
	</fieldset>
	

	
	<!--
	Services Relations
	-->
	
	<fieldset>
		<legend>{% trans "Service Relations" %}</legend>
	
			<label>{% trans "Agreements" %}<br />
			<span>
			<select multiple="multiple" name="service_agreements" class="select multiple extrabig asm small_fonts">
				{% for l in Agreements %}
				<option value="{{ l.id }}">{{ l }}</option>
				{% endfor %}
			</select>
			</span>
			</label>
	
			<label>{% trans "Professional" %}<br />
			<span>
			<select multiple="multiple" name="service_responsibles" class="select multiple extrabig asm small_fonts">
				{% for l in CareProfessionals %}
				<option value="{{ l.id }}">{{ l }}</option>
				{% endfor %}
			</select>
			</span>
			</label>
	
			<label class="service_research_project">{% trans "Research Project" %}<br />
				<span>
				<select name="service_research_project" class="extrabig">
					<option value=""></option>
					{% for l in ResearchProjects %}
					<option value="{{ l.id }}">{{ l }}</option>
					{% endfor %}
				</select>
				</span>
			</label>
	
	</fieldset>	
	
	<!--
	Service must to have a status
	-->
	
	<fieldset>
		<legend>{% trans "Service Status" %}</legend>
			<label>{% trans "Active?" %}<br />
			<select id="id_active" name="service_active" class="small">
			<option value="True" {% if object.active %} selected{% endif %}>{% trans "Yes" %}</option>
			<option value="False" {% if not object.active %} selected{% endif %}>{% trans "No" %}</option>
			</select>
			</label>
	</fieldset>


<br />	
</div>

<div id="sidebar" class="sidebar">
	<div class="bg_blue">
		<input type="hidden" name="service" value="{{ object.id }}" />
		{% include "tags/save.html" %}
	</div>
</div>

</form>

{% if object.id %}
</div> <!-- edit_form -->
{% endif %}


