{% extends "core/main.html" %}

{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}

{% block menu_myoffice %}active{% endblock %}

{% block vertical_menu %} - {% trans "Services" %}{% endblock %}

{% block submenu %}
    <ul>
        <li><a class="first" href="/service/">{% trans "all" %}</a></li>
        <li><a class="{% if not object.id %}active{% endif %}" href="/service/add/">{% trans "add" %}</a></li>
        {% if object.id %}<li><a class="active">{{ object.name }}</a></li>{% endif %}
        
    </ul>
{% endblock %}


{% block core %}

{% if object.id %}
	<h2 class="title_services title">{{ object.name }}</h2>
	<p class="description">{{ object.description }}<br />	
{% else %}
	<h2 class="title_services title">{% trans "Adding New Service" %}</h2>
	<p class="description">{% trans "Inform the service details then click on Save button" %}</p>
{% endif %}
</p>

<form action="/service/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" id="form_service" class="form_service">	
<div class="main_area">

	<!-- <a href="" id="help">&nbsp;</a> -->

	<!--
	Service Identification 
	-->
	
	<fieldset>
		<legend>{% trans "Service Identification" %}</legend>
			<label>{% trans "Service Name" %}<br />
			<input type="text" maxlength="80"  name="service_name" class="giant tabtitle" value="{{ object.name }}" />
			</label>
			<label>{% trans "Service Description" %}<br />
				<textarea name="service_description" maxlength="999" class="giant object_description">{{ object.description }}</textarea>				
			</label>
			<label>{% trans "Keywords (separated by ;)" %}<br />
			<input type="text" maxlength="100" name="service_keywords" class="giant" value="{{ object.keywords }}" />
			</label>
    </fieldset>
    <fieldset>
		<legend>{% trans "Research Project" %}</legend>
            <label>
                <input class="research_project_name" type="checkbox" name="research_project"{% if object.research_project %} checked{% endif %} />&nbsp;
                {% trans "This service is linked with a research project" %} 
            </label>
                <div class="research_project_name" {% if object.research_project_name %} style="display:block;" {% else %} style="display:none;" {% endif %}>
                    <label> 
                        {% trans "Name" %}
			            <input type="text" maxlength="100" name="research_project_name" class="giant" value="{{ object.research_project_name }}" />
                    </label>
                </div>
            
	</fieldset>

	<!--
	Service Profile 
	-->
	
	<fieldset>
    <input type="hidden" name="service_area" value="{{ area.id }}" />
    
		<legend>{% trans "Service Profile" %}</legend>
        <label>{{area.area_name}} [ <a href="/service/add/{% if object.id %}{{ object.id }}/{% endif %}">Change Area</a> ]</label><br />

        <div class="form_as_ul">
            {{ form_area.as_ul }}
        </div>

		<label>{% trans "Profession" %}<br />
		<select name="service_profession" multiple="multiple" class="high multiple giant">
			{% for p in Professions %}
				<option value="{{ p.id }}"{% for op in object.professions.all %}{% ifequal op.id p.id %} selected="selected"{% endifequal %}{% endfor %}>{{ p }}</option>
			{% endfor %}			
		</select>
		</label>

    </fieldset>

	
	<!--
	Services Relations
	-->
	
	<fieldset>
		<legend>{% trans "Service Relations" %}</legend>
	
			<label>{% trans "Agreements" %}<br />
			<span>
			<select multiple="multiple" name="service_agreements" class="select multiple extrabig asm high">
				{% for l in Agreements %}
				<option value="{{ l.id }}"{% for oa in object.agreements.values_list %}{% ifequal oa.0 l.id %} selected="selected"{% endifequal %}{% endfor %}>{{ l }}</option>
				{% endfor %}
			</select>
			</span>
			</label>
	
			<label>{% trans "Related Professionals" %}<br />
			<span>
			<select multiple="multiple" name="service_professionals" class="select multiple extrabig asm high">
				{% for l in CareProfessionals %}
				<option value="{{ l.id }}"{% for or in object.professionals.values_list %}{% ifequal or.0 l.id %} selected="selected"{% endifequal %}{% endfor %}>{{ l }}</option>
				{% endfor %}
			</select>
			</span>
			</label>

			<label>{% trans "Professionals Responsible" %}<br />
			<span>
			<select multiple="multiple" name="service_responsibles" class="select multiple extrabig asm high">
				{% for l in CareProfessionals %}
				<option value="{{ l.id }}"{% for or in object.responsibles.values_list %}{% ifequal or.0 l.id %} selected="selected"{% endifequal %}{% endfor %}>{{ l }}</option>
				{% endfor %}
			</select>
			</span>
			</label>
		
	</fieldset>	
	
	<!--
	Service must to have a status
	-->
	
<fieldset class="comment_form">
        <legend>{% trans "Comments" %}</legend>
        <label>{% trans "Comments" %}<br />
                <textarea name="comments" class="extrabig">{{ object.comments }}</textarea>
        </label>
</fieldset>


<br />	
</div>

<div id="sidebar" class="sidebar">
    {% if perms.service.service_write %}
    	<div class="bg_blue">
        	<input type="hidden" name="service" value="{{ object.id }}" />
            {% include "tags/save.html" %}
        </div>
    {% endif %}
    {% if object.id %}
        {% include "tags/service_sidebar.html" %}
    {% endif %}
</div>

</form>

{% endblock %}


