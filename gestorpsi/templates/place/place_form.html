{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}
{% include "core/ajax_page.html" %}

{% if object.id %}
	<div class="edit_form">
	<h2 class="title_places">{{ object.label }}</h2>
	<p class="description"><br />	
{% else %}
	<h2 class="title_places">{% trans "Adding New Place" %}</h2>
	<p class="description">{% trans "Inform the place details then click on Save button" %}</p>
{% endif %}


</p>

<form action="/place/{% if object.id %}{{ object.id }}/{% endif %}save/" method="post" class="collapsable form_place" id="form_place">	
<div id="main_area">

	<a href="" id="help">&nbsp;</a>

<div id="place_form">

	<!--
	Places must to have an Identification 
	-->
	
	<fieldset id="fieldset_place_identification">
		<legend>{% trans "Place Identification" %}</legend>
			<label>{% trans "Identification" %}<br />
			<input type="text" name="label" class="big tabtitle" value="{{ object.label }}" id="id_label" />
			</label>
			<label>{% trans "Place Type" %}<br />
			<select name="place_type" class="medium">
				{% for pt in PlaceTypes %}
				<option value="{{ pt.id }}"{% ifequal object.place_type.id pt.id %} selected{% endifequal %}>{{ pt }}</option>
				{% endfor %}
			</select>
				
			</label>
	</fieldset>

	
	<!--
	place have only one address
	-->
		
	{% include "meta/addressbook.html" %}
	
	<!--
	Places must to have a status
	-->
	
	<fieldset id="fieldset_place_status">
		<legend>{% trans "Place Status" %}</legend>
			<label>
			<input type="checkbox" name="visible" id="id_visible" {% if object.visible %} checked{% endif %} /><label>{% trans "Visible?" %}
			</label>
	</fieldset>

</div>
	
	<fieldset id="fieldset_room_identification" style="display:none">
	<legend>{% trans "Room Details" %}</legend>
	
		{% if not rooms %}
			{% include "tags/room.html" %}
		{% else %}
		{% for room in rooms %}
			{% include "tags/room.html" %}
		{% endfor %}
		{% endif %}

		<div id="room_more"></div>

	</fieldset>
<br />	
</div>

<div id="sidebar">
	<div class="bg_blue">
		<input type="hidden" name="place" value="{{ object.id }}" />
		{% include "tags/save.html" %}
	</div>
		<div id="place_actions" {% if not object.id %}style="display:none"{% endif %}>	
		<h3>{% trans 'Object Actions' %}</h3>
		<ul>
			<li id="add_room" class="add_to_form"><a class="notajax" href="#top">{% trans "Add room in this place" %}</a></li>
		</ul>
		
		
		<div id="div_list_rooms" style="display:{% if not rooms %}none{% endif %}">
		<h3>{% trans 'Rooms from this place' %}</h3>
		<ul>
			<li class="li_rooms" style="display:none">&nbsp;</li>
			{% for room in rooms %}
			<li class="li_rooms" id="li_room_{{ room.id }}"><a class="notajax" display="{{ room.id }}" href="#top">{{ room }}</a></li>
			{% endfor %}
			
		</ul>
		</div>
		
		
	</div>
</div>

</form>

{% if object.id %}
</div> <!-- edit_form -->
{% endif %}


