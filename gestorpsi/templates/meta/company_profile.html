{% comment %}

Copyright (C) 2008 GestorPsi

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

{% endcomment %}

{% load i18n %}
	
<!--
People Company Profile Form	
-->

<script>
$(function() {
    $('table#cnae_results tr td a').click(function() {
        $('input[name=cnae_class]').val($(this).attr('code'));
        $('.cnae_search').hide();
        $('table#cnae_results tbody tr').show();
        $('input[name=cnae_search_key]').val('');
    });
    
    $('a.show_cnae_search').click(function() {
        $('.cnae_search').toggle();
    });
    
    $('input[name=cnae_search_key]').keyup(function() {
        var typed = $(this).val();
        if(typed != '') {
            $('table#cnae_results tbody tr').hide();
            $('table#cnae_results tbody tr').each(function() {
                option = $(this).attr('cnae_class').toLowerCase();
                if(option.match(typed.toLowerCase())) {
                    $(this).show();
                }
            });
        } else {
            $('table#cnae_results tbody tr').show();    
        }
    });    

});
</script>   

<fieldset>
        <legend>{% trans "Company Profile" %}</legend>

            <label>{{ company_form.size.label }}<br />
                {{ company_form.size }}
            </label>
            <label>{{ company_form.cnae_class.label }} <a class="show_cnae_search" style="cursor:pointer;">{% trans "Search Code?" %}</a><br />
                {{ company_form.cnae_class }}
            </label>
            
            <label class="cnae_search hidden">{% trans "CNAE Search" %}<br />
            <input name="cnae_search_key" type="text" class="big" /></label>
            <div class="overflow cnae_search hidden">
                <table id="cnae_results" class="zebra">
                        <thead>  
                        <tr><th></th><th></th></tr> 
                        </thead>
                        <tbody>
                        {% for c in cnae %}
                        <tr class="zebra_{% cycle 0,1 %}" cnae_class="{{ c.cnae_class }}">
                            <td>{{ c }}</td><td><a style="cursor:pointer;" code="{{ c.id }}">{% trans "Select" %}</a></td>
                        </tr>
                        {% endfor %}
                        </tbody>
                </table>
            </div>
            

</fieldset>



